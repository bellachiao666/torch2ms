--- pytorch+++ mindspore@@ -1,9 +1,13 @@-import torch.nn as nn
-import torch.nn.functional as F
+import mindspore as ms
+import mindspore.nn as msnn
+import mindspore.ops as msops
+import mindspore.mint as mint
+from mindspore.mint import nn, ops
+# import torch.nn as nn
 from pointnet2_utils import PointNetSetAbstraction
 
 
-class get_model(nn.Module):
+class get_model(msnn.Cell):
     def __init__(self,num_class,normal_channel=True):
         super(get_model, self).__init__()
         in_channel = 6 if normal_channel else 3
@@ -19,7 +23,7 @@         self.drop2 = nn.Dropout(0.4)
         self.fc3 = nn.Linear(256, num_class)
 
-    def forward(self, xyz):
+    def construct(self, xyz):
         B, _, _ = xyz.shape
         if self.normal_channel:
             norm = xyz[:, 3:, :]
@@ -30,21 +34,21 @@         l2_xyz, l2_points = self.sa2(l1_xyz, l1_points)
         l3_xyz, l3_points = self.sa3(l2_xyz, l2_points)
         x = l3_points.view(B, 1024)
-        x = self.drop1(F.relu(self.bn1(self.fc1(x))))
-        x = self.drop2(F.relu(self.bn2(self.fc2(x))))
+        x = self.drop1(nn.functional.relu(self.bn1(self.fc1(x))))
+        x = self.drop2(nn.functional.relu(self.bn2(self.fc2(x))))
         x = self.fc3(x)
-        x = F.log_softmax(x, -1)
+        x = mint.special.log_softmax(x, -1)
 
 
         return x, l3_points
 
 
 
-class get_loss(nn.Module):
+class get_loss(msnn.Cell):
     def __init__(self):
         super(get_loss, self).__init__()
 
-    def forward(self, pred, target, trans_feat):
-        total_loss = F.nll_loss(pred, target)
+    def construct(self, pred, target, trans_feat):
+        total_loss = nn.functional.nll_loss(pred, target)
 
         return total_loss
