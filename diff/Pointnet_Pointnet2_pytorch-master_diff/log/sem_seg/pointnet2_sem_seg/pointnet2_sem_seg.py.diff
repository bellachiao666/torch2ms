--- pytorch+++ mindspore@@ -1,9 +1,13 @@-import torch.nn as nn
-import torch.nn.functional as F
+import mindspore as ms
+import mindspore.nn as msnn
+import mindspore.ops as msops
+import mindspore.mint as mint
+from mindspore.mint import nn, ops
+# import torch.nn as nn
 from models.pointnet2_utils import PointNetSetAbstraction,PointNetFeaturePropagation
 
 
-class get_model(nn.Module):
+class get_model(msnn.Cell):
     def __init__(self, num_classes):
         super(get_model, self).__init__()
         self.sa1 = PointNetSetAbstraction(1024, 0.1, 32, 9 + 3, [32, 32, 64], False)
@@ -19,7 +23,7 @@         self.drop1 = nn.Dropout(0.5)
         self.conv2 = nn.Conv1d(128, num_classes, 1)
 
-    def forward(self, xyz):
+    def construct(self, xyz):
         l0_points = xyz
         l0_xyz = xyz[:,:3,:]
 
@@ -33,23 +37,22 @@         l1_points = self.fp2(l1_xyz, l2_xyz, l1_points, l2_points)
         l0_points = self.fp1(l0_xyz, l1_xyz, None, l1_points)
 
-        x = self.drop1(F.relu(self.bn1(self.conv1(l0_points)), inplace=True))
+        x = self.drop1(nn.functional.relu(self.bn1(self.conv1(l0_points)), inplace = True))
         x = self.conv2(x)
-        x = F.log_softmax(x, dim=1)
+        x = mint.special.log_softmax(x, dim=1)
         x = x.permute(0, 2, 1)
         return x, l4_points
 
 
-class get_loss(nn.Module):
+class get_loss(msnn.Cell):
     def __init__(self):
         super(get_loss, self).__init__()
-    def forward(self, pred, target, trans_feat, weight):
-        total_loss = F.nll_loss(pred, target, weight=weight)
+    def construct(self, pred, target, trans_feat, weight):
+        total_loss = nn.functional.nll_loss(pred, target, weight = weight)
 
         return total_loss
 
 if __name__ == '__main__':
-    import  torch
     model = get_model(13)
-    xyz = torch.rand(6, 9, 2048)
+    xyz = mint.rand(6, 9, 2048)
     (model(xyz))