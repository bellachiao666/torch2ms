--- pytorch+++ mindspore@@ -1,3 +1,8 @@+import mindspore as ms
+import mindspore.nn as msnn
+import mindspore.ops as msops
+import mindspore.mint as mint
+from mindspore.mint import nn, ops
 """ Model creation / weight loading / state_dict helpers
 
 Hacked together by / Copyright 2020 Ross Wightman
@@ -6,10 +11,10 @@ import os
 from typing import Any, Callable, Dict, Optional, Union
 
-import torch
+# import torch
 
 try:
-    import safetensors.torch
+    # import safetensors.torch
 
     _has_safetensors = True
 except ImportError:
@@ -41,6 +46,8 @@     return cleaned_state_dict
 
 
+# 'torch.device' 未在映射表(api_mapping_out_excel.json)中找到，需手动确认;
+# 'torch' 未在映射表(api_mapping_out_excel.json)中找到，需手动确认;
 def load_state_dict(
         checkpoint_path: str,
         use_ema: bool = True,
@@ -65,9 +72,9 @@             checkpoint = safetensors.torch.load_file(checkpoint_path, device=device)
         else:
             try:
-                checkpoint = torch.load(checkpoint_path, map_location=device, weights_only=weights_only)
+                checkpoint = torch.load(checkpoint_path, map_location=device, weights_only=weights_only)  # 'torch.load' 未在映射表(api_mapping_out_excel.json)中找到，需手动确认;
             except TypeError:
-                checkpoint = torch.load(checkpoint_path, map_location=device)
+                checkpoint = torch.load(checkpoint_path, map_location=device)  # 'torch.load' 未在映射表(api_mapping_out_excel.json)中找到，需手动确认;
 
         state_dict_key = ''
         if isinstance(checkpoint, dict):
@@ -87,8 +94,10 @@         raise FileNotFoundError()
 
 
+# 'torch.device' 未在映射表(api_mapping_out_excel.json)中找到，需手动确认;
+# 'torch' 未在映射表(api_mapping_out_excel.json)中找到，需手动确认;
 def load_checkpoint(
-        model: torch.nn.Module,
+        model: msnn.Cell,
         checkpoint_path: str,
         use_ema: bool = True,
         device: Union[str, torch.device] = 'cpu',
@@ -131,7 +140,7 @@ 
 def remap_state_dict(
         state_dict: Dict[str, Any],
-        model: torch.nn.Module,
+        model: msnn.Cell,
         allow_reshape: bool = True
 ) -> Dict[str, Any]:
     """Remap checkpoint by iterating over state dicts in order (ignoring original keys).
@@ -158,8 +167,11 @@     return out_dict
 
 
+# 'torch.optim.Optimizer' 未在映射表(api_mapping_out_excel.json)中找到，需手动确认;
+# 'torch.optim' 未在映射表(api_mapping_out_excel.json)中找到，需手动确认;
+# 'torch' 未在映射表(api_mapping_out_excel.json)中找到，需手动确认;
 def resume_checkpoint(
-        model: torch.nn.Module,
+        model: msnn.Cell,
         checkpoint_path: str,
         optimizer: Optional[torch.optim.Optimizer] = None,
         loss_scaler: Optional[Any] = None,
@@ -179,7 +191,7 @@     """
     resume_epoch = None
     if os.path.isfile(checkpoint_path):
-        checkpoint = torch.load(checkpoint_path, map_location='cpu', weights_only=False)
+        checkpoint = torch.load(checkpoint_path, map_location='cpu', weights_only=False)  # 'torch.load' 未在映射表(api_mapping_out_excel.json)中找到，需手动确认;
         if isinstance(checkpoint, dict) and 'state_dict' in checkpoint:
             if log_info:
                 _logger.info('Restoring model state from checkpoint...')
