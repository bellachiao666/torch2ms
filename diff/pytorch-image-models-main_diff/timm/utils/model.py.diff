--- pytorch+++ mindspore@@ -1,3 +1,8 @@+import mindspore as ms
+import mindspore.nn as msnn
+import mindspore.ops as msops
+import mindspore.mint as mint
+from mindspore.mint import nn, ops
 """ Model / state_dict utils
 
 Hacked together by / Copyright 2020 Ross Wightman
@@ -5,8 +10,8 @@ import fnmatch
 from copy import deepcopy
 
-import torch
-from torchvision.ops.misc import FrozenBatchNorm2d
+# import torch
+# from torchvision.ops.misc import FrozenBatchNorm2d
 
 from timm.layers import BatchNormAct2d, SyncBatchNormAct, FrozenBatchNormAct2d,\
     freeze_batch_norm_2d, unfreeze_batch_norm_2d
@@ -32,19 +37,19 @@ def avg_sq_ch_mean(model, input, output):
     """ calculate average channel square mean of output activations
     """
-    return torch.mean(output.mean(axis=[0, 2, 3]) ** 2).item()
+    return mint.mean(output.mean(axis=[0, 2, 3]) ** 2).item()
 
 
 def avg_ch_var(model, input, output):
     """ calculate average channel variance of output activations
     """
-    return torch.mean(output.var(axis=[0, 2, 3])).item()
+    return mint.mean(output.var(axis=[0, 2, 3])).item()
 
 
 def avg_ch_var_residual(model, input, output):
     """ calculate average channel variance of output activations
     """
-    return torch.mean(output.var(axis=[0, 2, 3])).item()
+    return mint.mean(output.var(axis=[0, 2, 3])).item()
 
 
 class ActivationStatsHook:
@@ -102,7 +107,7 @@ 
     Example Usage: https://gist.github.com/amaarora/6e56942fcb46e67ba203f3009b30d950
     """
-    x = torch.normal(0., 1., input_shape)
+    x = mint.normal(0., 1., input_shape)
     hook = ActivationStatsHook(model, hook_fn_locs=hook_fn_locs, hook_fns=hook_fns)
     _ = model(x)
     return hook.stats
@@ -230,6 +235,7 @@     _freeze_unfreeze(root_module, submodules, include_bn_running_stats=include_bn_running_stats, mode="unfreeze")
 
 
+# 类型标注 'torch.nn.Module' 未在映射表(api_mapping_out_excel.json)中找到，需手动确认;
 def reparameterize_model(model: torch.nn.Module, inplace=False) -> torch.nn.Module:
     if not inplace:
         model = deepcopy(model)
